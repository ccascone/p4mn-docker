sudo: required

services:
  - docker

env:
  global:
    CACHE_IMAGE: ccasconeonf/p4mn:latest

before_script:
  - docker pull $CACHE_IMAGE:latest || true

script:
  - docker build -t p4mn-local .
  - docker run --rm --entrypoint simple_switch_grpc p4mn-local --help
  - docker run --rm --entrypoint mn p4mn-local --help